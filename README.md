# Tianchi-News-Recommend

# 数据来源
https://tianchi.aliyun.com/competition/entrance/531842/information

# code文件夹（最终效果较好的召回排序算法）
包含了召回、特征工程、排序的最终代码，使用ItemCF，基于网络关系的召回和Word2Vec 向量召回，合并召回结果后Hit Rate达到0.367，MRR达到0.220。
进行特征工程，创建了新闻特征，用户特征，用户-新闻交互特征共30项。
使用LightGBM进行排序，并进行五折交叉验证，排序后指标Hit Rate达到0.441，MRR达到0.265。
完整记录见code/log/log.dox

# 一些尝试
# main.py
### 召回
    用了两种召回策略，分别是基于新闻相似度的协同过滤召回和基于新闻热度的召回。
    - 基于新闻相似度的协同过滤（25篇）
        先构造新闻相似度矩阵，相似度为相似新闻出现的次数取对数，之后根据矩阵选出前K篇相似度最高的新闻。
    - 基于新闻热度的召回（10篇）
        选取用户最后一次点击时刻的前一天到后一天的前K篇最热门文章推荐给用户。
    两者合并去重。
    
### 训练和预测
    - 负采样
        由于召回的负样本过多，所以需要进行负采样。负采样使用比例0.001进行随机采样，最少1篇，最多5篇，分别从用户和新闻两个维度进行负采样。
        其中正样本数量为118761。
    - 排序模型：LGBMRanker
    - 训练数据：赛事提供的train_click_log和testA_click_log的前N-1次点击（由于testA中有部分用户只点击了一次，所以开始处理时已经去除。），其中80%为训练集，10%为模型使用的eval_set，/
        10%为线下验证集，数据的最后一次点击作为预测目标。（80%是所有点击数据，不是用户数量，所以用户数量可能会有所不同）
    - 线下MRR
        0.23
